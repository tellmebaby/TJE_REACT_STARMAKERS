<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{/layout/default_layout}">

<head>
  <title>í™ë³´</title>

  <!-- include summernote css/js-->
  <!-- <link href="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.8/summernote.css" rel="stylesheet"> -->
  <!-- <script src="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.8/summernote.js"></script> -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/summernote@0.8.20/dist/summernote-lite.min.css"
    integrity="sha256-IKhQVXDfwbVELwiR0ke6dX+pJt0RSmWky3WB2pNx9Hg=" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.20/dist/summernote-lite.min.js"
    integrity="sha256-5slxYrL5Ct3mhMAp/dgnb5JSnTYMtkr4dHby34N10qw=" crossorigin="anonymous"></script>

  <!-- language pack -->
  <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.20/dist/lang/summernote-ko-KR.min.js"
    integrity="sha256-y2bkXLA0VKwUx5hwbBKnaboRThcu7YOFyuYarJbCnoQ=" crossorigin="anonymous"></script>

  <!-- DatePicker  -->
  <script src="/lib/datePicker.js" type="text/javascript"></script>
  <!-- <script src="https://unpkg.com/gijgo@1.9.14/js/gijgo.min.js" type="text/javascript"></script> -->
  <link href="https://unpkg.com/gijgo@1.9.14/css/gijgo.min.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="/css/post.css">

</head>


<!-- layout:decorate ì“¸ ë•Œ ë³¸ë¬¸ ë‚´ìš©ì€ <th:block layout:fragment="content"></th:block> ì•ˆì— ì ì–´ì•¼ í™”ë©´ì— ëœ¸ -->
<th:block layout:fragment="content" class="align-items-center ml-5">
  <div class="body lg" style="max-width: 900 ;">
    <div class="d-flex justify-content-center">
        <h1 class="starTitle" th:text="${starBoard.title}"> </h1>
    </div>
    <div class="btn d-flex justify-content-center">
        <span class="btn btn-primary" th:text="${starBoard.status}"></span>
    </div>
      <div class="container2">
        <form action="/page/starBoard/delete" method="get" id="read">
          <input type="hidden" name="starNo" th:value="${starBoard.starNo}">
          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">

          <div class="d-flex justify-content-between fw-light fs-6 read-top">
            <span class="" th:text="|í™ë³´ ê¸°ê°„ ${#dates.format(starBoard.startDate, 'yyyy-MM-dd')}~${#dates.format(starBoard.endDate, 'yyyy-MM-dd')}|"></span>
            <span class="align-items-center" th:text="|ì‘ì„±ì¼ ${#dates.format(starBoard.regDate, 'yyyy-MM-dd HH:mm:ss')}|"></span>
            <div class="d-flex justify-content-end col-2">
              <span ><i class="fa-solid fa-star"></i> </span>
              <span th:text="${starBoard.likes}"></span>
              <span class="ms-2"><i class="fa-regular fa-eye"></i> </span>
              <span th:text="${starBoard.views}"></span>
            </div>
            <!-- <span th:text="|view${starBoard.views}  likes${starBoard.likes}|"></span> -->
          </div>
          <div class="main-image">
            <div>
              <img th:src="|/file/img/${starBoard.imgNo}|" class="image rounded mt-auto" alt="ì¸ë„¤ì¼">
            </div>
            <div class="text">
              <span class="fw-bold fs-1 m-0 p-0" th:text="${starBoard.title}"></span>
              <br>
              <span class="fw-bold fs-10" th:text="${starBoard.writer}"></span>
              <br>
              <div th:text="|${starBoard.category1}|" class="fs-10" id="category1" style="display: flex;">
              </div>
              <!-- <img src="/img/icon/instagram.png" class="content-icon instagram" style="max-width: 20px;"> -->
              <span th:text="|${starBoard.category2}|" class="fs-10" id="category2"></span>
            </div>
            <!-- <div class="icon">
              <i class="fa-regular fa-star"></i>
            </div> -->
          </div>

          <div class="content-container2" id="content">
            <span th:utext="${starBoard.content}"></span>
          </div>
          <div class="button-box1">
            <button class="like-btn" data-user-no="[[${session.user != null ? session.user.userNo : ''}]]" data-star-no="[[${starBoard.starNo}]]">
              <i class="fa fa-star fa-regular [[${#lists.contains(session.user.likedStars, starBoard.starNo) ? 'fa-solid' : 'fa-regular'}]]"></i>
          </button>
          <span id="like-count" th:text="${starBoard.likes}"></span>
          </div>
          <div class="d-flex justify-content-end mt-2 button-box">
            <button class="btn-list" type="button" onclick="moveList()">ëª©ë¡</button>
            <button th:if="${session.user} and ${session.user.userNo}==${starBoard.userNo}"
              class="btn-update" type="button" onclick="update()">ìˆ˜ì •</button>
            <input th:if="${session.user} and ${session.user.userNo}==${starBoard.userNo}"
              class="btn-delete" type="submit" onclick="actionDelete()"
              value="ì‚­ì œ"></input>
          </div>
        </form>
        <!-- ì¢‹ì•„ìš” ë²„íŠ¼ -->
        

        <!-- ëŒ“ê¸€ ë“±ë¡ -->
        <div class="reply-container">
          <div class="reply-box">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
            <!-- ì‚¬ìš©ì ì•„ì´ë””(hidden) -->
            <input type="hidden" name="username" id="username"
              th:value="${session.user != null ? session.user.email : 'ë¹„íšŒì›'}">
            <input type="hidden" name="writer" id="reply-writer"
              th:value="${session.user != null ? session.user.id : 'ë¹„íšŒì›'}">
            <textarea type="text" name="content" id="reply-content" placeholder="ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì‘ì„±í•˜ì„¸ìš”. ìš´ì˜ì›ì¹™ì— ìœ„ë°°ë˜ëŠ” ëŒ“ê¸€ì€ ì‚­ì œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                  ë¡œê·¸ì¸ í•˜ì‹  ë¶„ë§Œ ëŒ“ê¸€ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." th:disabled="${session.user == null}"></textarea>
            <button type="button" id="btn-reply-insert" class="btn-reply" onclick="insertReply()"
              th:disabled="${session.user == null}">ë“±ë¡</button>
          </div>
        </div>
        <div class="top-reply-list">
          <label class="reply">ëŒ“ê¸€</label>
          <label class="reply-count" th:text="${starBoard.commentCount} + ' ê°œ'"></label>
        </div>
        <!-- ëŒ“ê¸€ ëª©ë¡ -->
        <div id="reply-listbox">
          <div id="reply-list">

          </div>
        </div>

      </div>
    </div>
  
  <script>
    
    $(document).on('click', '.like-btn', function (e) {
        e.preventDefault(); // ê¸°ë³¸ ë™ì‘ ë°©ì§€

        var userNo = "[[${session.user != null ? session.user.userNo : ''}]]";
        var starNo = "[[${starBoard.starNo}]]";
        var csrfToken = "[[${_csrf.token}]]";

        if (userNo === '') {
            alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
            return;
        }

        $.ajax({
            url: '/page/like',
            method: 'POST',
            contentType: 'application/x-www-form-urlencoded',
            data: {
                userNo: userNo,
                starNo: starNo
            },
            beforeSend: function (xhr) {
                xhr.setRequestHeader('X-CSRF-TOKEN', csrfToken);
            },
            success: function (response) {
                var likeIcon = $(this).find('i.fa-star');
                var likeCount = $('#like-count');

                if (response.liked) {
                    likeIcon.removeClass('fa-regular').addClass('fa-solid');
                    likeCount.text(parseInt(likeCount.text()) + 1);
                } else {
                    likeIcon.removeClass('fa-solid').addClass('fa-regular');
                    likeCount.text(parseInt(likeCount.text()) - 1);
                }
            }.bind(this),
            error: function (xhr, status, error) {
                console.error("ì¢‹ì•„ìš” ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨:", error);
            }
        });
    });



    const starNo = "[[${starBoard.starNo}]]"

    function moveList() {
      location.href = '/page/starCard/starList'
    }

    function update() {
      location.href = '/page/starCard/starUpdate?starNo=' + starNo;
    }

    const form = document.getElementById('read')
    //  th:if="${session.user.userNo}==${starBoard.userNo}"ì‚­ì œ ìš”ì²­
    function actionDelete() {
      let check = confirm('ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')
      form.method='post'
      // form.submit;
    }

    // console.log(newText)
    const category1 = document.getElementById('category1')
    const category1Text = category1.textContent
    // category1.style.display=inline-block;
    console.log(category1)
    const newText1 = category1Text.split(',').map(icon =>
      `<img src="/img/icon/${icon}.png" class="content-icon ${icon}" style="max-width:20px; margin: 0; margin-right:5px; max-height:20px;">`
    ).join(' ')
    category1.innerHTML = newText1


    const category2 = document.getElementById('category2')
    const category2Text = category2.textContent

    var arr = [category2Text.split(',')]
    console.log(arr)
    const category2Text2 = category2Text.split(',').map(word => `#${word.trim()}`).join(' ')
    category2.textContent = category2Text2

    // ëŒ“ê¸€ ëª©ë¡ ìš”ì²­
    replyList()

    // ëŒ“ê¸€ ëª©ë¡
    function replyList() {
      // AJAX ë¹„ë™ê¸° ìš”ì²­
      // ğŸ’ CRSF TOKEN
      let csrfToken = document.querySelector('input[name="_csrf"]').value;
      let request = new XMLHttpRequest()

      // ìš”ì²­ ì„¸íŒ…
      // request.open(ìš”ì²­ë©”ì†Œë“œ, URL)
      request.open('GET', '/page/reply/' + starNo) // ê¸€ ë²ˆí˜¸

      request.onreadystatechange = function () {

        // ìš”ì²­ ì„±ê³µ ì‹œ,
        if (request.readyState == request.DONE && request.status == 200) {
          // ëŒ“ê¸€ ëª©ë¡ í™•ì¸
          let response = request.responseText
          // ì„œë²„ì—ì„œ ë Œë”ë§í•œ HTML
          let data = response
          let replyList = document.getElementById('reply-listbox')
          replyList.innerHTML = data

          updateEvent()
          event()
        }
      }
      request.send()
    }

    // ëŒ“ê¸€ ë“±ë¡
    let $writer = document.getElementById('reply-writer')
    let writer = $writer.value

    function insertReply() {
      let $content = document.getElementById('reply-content')
      let content = $content.value

      if (content === "") {
                alert("ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }
      let username = document.getElementById('username').value
      console.log(username)
      let data = {
        'starNo': starNo,
        'writer': writer,
        'content': content,
        'username': username
      }

      console.dir(data)
      // ğŸ’ CRSF TOKEN
      let csrfToken = document.querySelector('input[name="_csrf"]').value;
      // var csrfToken = "[[${_csrf.token}]]"

      let request = new XMLHttpRequest()

      request.open('POST', '/page/reply')
      request.setRequestHeader('Content-Type', 'application/json')
      request.setRequestHeader('X-CSRF-TOKEN', csrfToken)
      request.send(JSON.stringify(data))

      request.onreadystatechange = function () {

        // ìš”ì²­ ì„±ê³µ ì‹œ,
        if (request.readyState == request.DONE && request.status == 201) {
          console.log('ëŒ“ê¸€ ë“±ë¡ ì„±ê³µ!');
          let response = request.responseText
          if (response == 'SUCCESS') {
            replyList()
            // ëŒ“ê¸€ ëª©ë¡ ê°±ì‹  í›„ ëŒ“ê¸€ ì…ë ¥ ì°½ ë¹„ìš°ê¸°
            // $writer.value = ''
            $content.value = ''
          }
        }
      }
    }
  </script>
  <script>
    // ì´ë²¤íŠ¸ ë“±ë¡

    function updateEvent() {
      // ëŒ“ê¸€ ìˆ˜ì • ë²„íŠ¼
      let $btnUpdate = document.getElementsByClassName('btn-reply-update')

      // ëŒ“ê¸€ ìˆ˜ì • í´ë¦­ ì´ë²¤íŠ¸

      for (let i = 0; i < $btnUpdate.length; i++) {
        $btnUpdate[i].addEventListener('click', function () {
          let $top = $btnUpdate[i].parentNode
          // let writer = $top.childNodes[1].textContent
          let $inner = $top.parentNode
          let content = $inner.childNodes[1].textContent
          let $replyBox = $inner.parentNode
          let $toptop = $replyBox.parentElement
          console.log($replyBox)

          let replyNo = $btnUpdate[i].getAttribute('data') // ëŒ“ê¸€ ë²ˆí˜¸

          // ëŒ“ê¸€ ìˆ˜ì • ëª¨ë“œ
          // 1. ê¸°ì¡´ ëŒ“ê¸€ ë‚´ìš©ì°½ ìˆ¨ê¸°ê¸°
          $inner.style.display = 'none';
          // 2. ìˆ˜ì • UI ì¶œë ¥
          let $editor = document.createElement('div')
          $editor.classList.add('inner');
          $editor.id = 'editor'
          let editor = `
                      <input type="hidden" id="update-writer" value="${writer}">
                      <textarea id="update-reply" cols="100" >${content}</textarea>
                      <div class="reply-button">
                          <button class="btn-reply-update" onclick="updateReply(${replyNo})">ìˆ˜ì •</button>
                          <button class="btn-reply-delete" onclick="cancelReply(${replyNo})">ì·¨ì†Œ</button>
                      </div>
                  `;

          $editor.innerHTML = editor
          $replyBox.appendChild($editor)
        })

      }

    }



    // ëŒ“ê¸€ ìˆ˜ì • ìš”ì²­
    function updateReply(replyNo) {
      // alert('ëŒ“ê¸€ ìˆ˜ì •')
      let writer = document.getElementById('update-writer').value
      let content = document.getElementById('update-reply').value

      console.log(`ìˆ˜ì •í•œ ì‘ì„±ì : ${writer}`)
      console.log(`ìˆ˜ì •í•œ ë‚´ìš© :  ${content}`)


      let data = {
        'replyNo': replyNo,
        'writer': writer,
        'content': content
      }

      console.dir(data)

      // ìˆ˜ì • ìš”ì²­
      let csrfToken = document.querySelector('input[name="_csrf"]').value;
      let request = new XMLHttpRequest()
      request.open('PUT', '/page/reply')
      request.setRequestHeader('Content-Type', 'application/json')
      request.setRequestHeader('X-CSRF-TOKEN', csrfToken)
      request.send(JSON.stringify(data))

      request.onreadystatechange = function () {
        // ìš”ì²­ ì„±ê³µ ì‹œ,
        if (request.readyState == request.DONE && request.status == 200) {
          console.log('ëŒ“ê¸€ ìˆ˜ì • ì„±ê³µ!');
          let response = request.responseText
          alert(response)
          if (response == 'SUCCESS') {
            replyList() // ëŒ“ê¸€ ëª©ë¡ ê°±ì‹ 
          }
        }
      }
    }

    // ëŒ“ê¸€ ìˆ˜ì • ì·¨ì†Œ
    function cancelReply() {
      const check = confirm("ì‘ì„±ì¤‘ì¸ ë‚´ìš©ì´ ì‚¬ë¼ì§‘ë‹ˆë‹¤.")
      if (!check)
        return

      let $editor = document.getElementById('editor')
      $editor.remove()

      // ì›ë˜ ìˆë˜ inner ë‹¤ì‹œ ê°€ì ¸ì˜¤ê¸°
      let $inner = document.getElementsByClassName('reply-middle')
      console.log("ì·¨ì†Œí–ˆì„ ë•Œ : " + $inner)
      for (let i = 0; i < $inner.length; i++) {
        $inner[i].style.display = 'flex'

      }

    }

    // ëŒ“ê¸€ ì‚­ì œ
    function deleteReply(replyNo) {

      const check = confirm("ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")
      if (!check)
        return
      let csrfToken = document.querySelector('input[name="_csrf"]').value;
      let request = new XMLHttpRequest();

      request.open('DELETE', `/page/reply/${replyNo}`);
      request.setRequestHeader('X-CSRF-TOKEN', csrfToken);
      request.send();

      request.onreadystatechange = function () {
        if (request.readyState == request.DONE && request.status == 200) {
          let response = request.responseText
          if (request.responseText == 'SUCCESS') {
            replyList();
          }
        }
      }
    }


    // ë‹µê¸€ ë“±ë¡
    function insertAnswer(element, replyNo) {
      let $rereplyBox = element.parentNode
      console.log(`ë¶€ëª¨ ë²ˆí˜¸ : ${replyNo}`);
      console.log($rereplyBox);
      console.log(username.value, writer)

      // ë‹µê¸€ ì‘ì„± UI
      let $editor = document.createElement('div')
      $editor.classList.add('rereply-container')
      // $editor.classList.add('rereply-box')
      $editor.id = 'answer'

      let editor = ``
      editor += `

          <div class="rereply-box">
                  
              <input type="hidden" name="writer" id="rereply-writer" value="${writer}">
              <textarea name="rereply-content" id="rereply-content" type="text" placeholder="
              ë¡œê·¸ì¸í•˜ì§€ ì•Šì•˜ì„ ê²½ìš°, ë‹µê¸€ì„ ë“±ë¡í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."></textarea>
              <button type="button" onclick="answer(${replyNo})">ë“±ë¡</button>
                   
          </div>

      `
      $editor.innerHTML = editor

      // ê¸°ì¡´ ë‹µê¸€ UI ê°€ ìˆìœ¼ë©´ ì´ˆê¸°í™”
      let $answer = document.getElementById("answer");
      if ($answer) {
        $answer.parentNode.removeChild($answer);
      }

      // ìš”ì†Œ.after(ì¶”ê°€ ìš”ì†Œ)
      if ($rereplyBox) {
        $rereplyBox.after($editor);

        $editor.style.visibility = 'visible';
        $editor.style.height = 'auto';
        $editor.style.overflow = 'visible';
      } else {
        console.error('$rereplyBox ë‹¤ì‹œ ì‚´í´ë³´ê¸°');
      }

    }

    $.ajaxSetup({
      headers: {
        'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
      }
    });

    // ë‹µê¸€ ë“±ë¡ ìš”ì²­
    function answer(parentNo) {
      // TODO:
      // 1. answer-writer, answer-content ê°’ì„ ê°€ì ¸ì˜¤ê³ 
      // 2. data = {ë¶€ëª¨ë²ˆí˜¸, ì‘ì„±ì, ë‚´ìš©}
      // 3. POST = /reply ìš”ì²­
      let $writer = document.getElementById('rereply-writer')
      let $content = document.getElementById('rereply-content')

      let writer = $writer.value
      let content = $content.value

      if (content === "") {
                alert("ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }

      let username = document.getElementById('username').value

      console.log(username, content)


      let data = {
        'starNo': starNo, // ê¸€ ë²ˆí˜¸
        'parentNo': parentNo, // ë¶€ëª¨ ëŒ“ê¸€ ë²ˆí˜¸
        'writer': writer,
        'content': content,
        'username': username
      }

      console.dir(data)
      let csrfToken = document.querySelector('input[name="_csrf"]').value;
      let request = new XMLHttpRequest()

      request.open('POST', '/page/reply')
      request.setRequestHeader('X-CSRF-TOKEN', csrfToken);
      request.setRequestHeader('Content-Type', 'application/json')
      request.send(JSON.stringify(data))

      request.onreadystatechange = function () {

        // ìš”ì²­ ì„±ê³µ ì‹œ,
        if (request.readyState == request.DONE && request.status == 201) {
          console.log('ë‹µê¸€ ë“±ë¡ ì„±ê³µ!');
          let response = request.responseText
          if (response == 'SUCCESS') {
            replyList() // ëŒ“ê¸€ ëª©ë¡ ê°±ì‹ 
          }
        }
      }
    }

    function event() {
      // ë‹µê¸€ ìˆ˜ì • ë²„íŠ¼
      let $btnUpdate = document.getElementsByClassName('btn-rereply-update')

      // ë‹µê¸€ ìˆ˜ì • í´ë¦­ ì´ë²¤íŠ¸
      for (let i = 0; i < $btnUpdate.length; i++) {
        $btnUpdate[i].addEventListener('click', function () {
          let $top = $btnUpdate[i].parentNode
          // let writer = $top.childNodes[1].textContent
          let $inner = $top.parentNode
          let content = $inner.childNodes[1].textContent
          let $replyBox = $inner.parentNode
          let $toptop = $replyBox.parentElement
          console.log($replyBox)

          let replyNo = $btnUpdate[i].getAttribute('data') // ë‹µê¸€ ë²ˆí˜¸

          // ë‹µê¸€ ìˆ˜ì • ëª¨ë“œ
          // 1. ê¸°ì¡´ ë‹µê¸€ ë‚´ìš©ì°½ ìˆ¨ê¸°ê¸°
          $inner.style.display = 'none';
          // 2. ìˆ˜ì • UI ì¶œë ¥
          let $editor = document.createElement('div')
          $editor.classList.add('inner');
          $editor.id = 'editor'
          let editor = `
                      <input type="hidden" id="update-writer" value="${writer}">
                      <textarea id="update-reply" cols="80" >${content}</textarea>
                      <div class="reply-button">
                          <button class="btn-reply-update" onclick="updateRereply(${replyNo})">ìˆ˜ì •</button>
                          <button class="btn-reply-delete" onclick="cancelRereply(${replyNo})">ì·¨ì†Œ</button>
                      </div>
                  `;

          $editor.innerHTML = editor
          $replyBox.appendChild($editor)

        })
      }
    }

    // ë‹µê¸€ ìˆ˜ì • ìš”ì²­
    function updateRereply(replyNo) {
      // alert('ë‹µê¸€ ìˆ˜ì •')
      let writer = document.getElementById('update-writer').value
      let content = document.getElementById('update-reply').value

      console.log(`ìˆ˜ì •í•œ ì‘ì„±ì : ${writer}`)
      console.log(`ìˆ˜ì •í•œ ë‚´ìš© :  ${content}`)


      let data = {
        'replyNo': replyNo,
        'writer': writer,
        'content': content
      }

      console.dir(data)

      // ìˆ˜ì • ìš”ì²­
      let csrfToken = document.querySelector('input[name="_csrf"]').value;
      let request = new XMLHttpRequest()
      request.open('PUT', '/page/reply')
      request.setRequestHeader('Content-Type', 'application/json')
      request.setRequestHeader('X-CSRF-TOKEN', csrfToken)
      request.send(JSON.stringify(data))

      request.onreadystatechange = function () {
        // ìš”ì²­ ì„±ê³µ ì‹œ,
        if (request.readyState == request.DONE && request.status == 200) {
          console.log('ëŒ“ê¸€ ìˆ˜ì • ì„±ê³µ!');
          let response = request.responseText
          alert(response)
          if (response == 'SUCCESS') {
            replyList() // ëŒ“ê¸€ ëª©ë¡ ê°±ì‹ 
          }
        }
      }
    }

    // ë‹µê¸€ ìˆ˜ì • ì·¨ì†Œ
    function cancelRereply() {
      const check = confirm("ì‘ì„±ì¤‘ì¸ ë‚´ìš©ì´ ì‚¬ë¼ì§‘ë‹ˆë‹¤.")
      if (!check)
        return

      let $editor = document.getElementById('editor')
      $editor.remove()

      // ì›ë˜ ìˆë˜ inner ë‹¤ì‹œ ê°€ì ¸ì˜¤ê¸°
      let $inner = document.getElementsByClassName('rereply-middle')
      console.log("ì·¨ì†Œí–ˆì„ ë•Œ : " + $inner)
      for (let i = 0; i < $inner.length; i++) {
        $inner[i].style.display = 'flex'

      }

    }
  </script>


</th:block>

</html>